(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74c3ed93"],{"0a55":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Button",{staticClass:"mybutton",attrs:{type:"primary"},on:{click:t.addUser}},[t._v("新增用户")]),a("Input",{staticClass:"search",attrs:{search:"",placeholder:"请输入用户名"},on:{"on-search":t.mysearch},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}},[a("Icon",{attrs:{slot:"suffix",type:"ios-search"},slot:"suffix"})],1),a("Table",{attrs:{border:"",data:t.tableData1,columns:t.tableColumns1}}),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:t.total,current:t.currentPage},on:{"on-change":t.changePage}})],1)]),a("Modal",{attrs:{title:t.title},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("Form",{ref:"formCustom",attrs:{model:t.formCustom,rules:t.ruleCustom,"label-width":80}},[a("FormItem",{attrs:{label:"用户名",prop:"username"}},[a("Input",{attrs:{type:"text"},model:{value:t.formCustom.username,callback:function(e){t.$set(t.formCustom,"username",e)},expression:"formCustom.username"}})],1),a("FormItem",{attrs:{label:"密码",prop:"password"}},[a("Input",{attrs:{type:"text"},model:{value:t.formCustom.password,callback:function(e){t.$set(t.formCustom,"password",e)},expression:"formCustom.password"}})],1),a("FormItem",{attrs:{label:"角色"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.formCustom.identity,expression:"formCustom.identity"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.formCustom,"identity",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"1"}},[t._v("管理员")]),a("option",{attrs:{value:"2"}},[t._v("系统管理员")])])]),a("FormItem",{attrs:{label:"邮箱",prop:"mailbox"}},[a("Input",{attrs:{type:"text"},model:{value:t.formCustom.mailbox,callback:function(e){t.$set(t.formCustom,"mailbox",e)},expression:"formCustom.mailbox"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text",size:"large"},on:{click:t.cancel}},[t._v("取消")]),a("Button",{attrs:{type:"primary",size:"large"},on:{click:t.ok}},[t._v("确定")])],1)],1)],1)},r=[],s=(a("ac6a"),a("6b97")),n={data:function(){var t=this,e=function(t,e,a){""===e?a(new Error("请输入密码")):a()},a=function(t,e,a){""===e?a(new Error("Please enter your password again")):a()},o=function(t,e,a){""===e?a(new Error("请输入用户名")):a()},r=function(t,e,a){if(""===e)a(new Error("请输入邮箱"));else{var o=/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;o.test(e)?a():a(new Error("请输入有效的邮箱"))}};return{formCustom:{username:"",password:"",identity:2,mailbox:""},title:"",tomethod:"",searchValue:"",ruleCustom:{username:[{validator:o,trigger:"blur"}],password:[{validator:e,trigger:"blur"}],identity:[{validator:a,trigger:"blur"}],mailbox:[{validator:r,trigger:"blur"}]},modal:!1,pageSize:10,total:0,currentPage:1,tableData1:[],tableColumns1:[{title:"用户名",key:"username"},{title:"角色",key:"identity",render:function(t,e){return t("div",e.row.identity.access)}},{title:"邮箱",key:"mailbox"},{title:"操作",key:"action",width:150,align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.show(a.index)}}},"编辑"),e("Button",{props:{type:"error",size:"small"},on:{click:function(){t.remove(a.index)}}},"删除")])}}]}},methods:{formatDate:function(t){var e=t.getFullYear(),a=t.getMonth()+1;a=a<10?"0"+a:a;var o=t.getDate();return o=o<10?"0"+o:o,e+"-"+a+"-"+o},changePage:function(t){var e=this;Object(s["d"])(10,t).then(function(t){var a=t.data.page;"200"===t.data.resultCode&&(e.tableData1=[],a.list.forEach(function(t){e.tableData1.push(t)}),e.total=a.total,e.currentPage=a.pageNum)})},show:function(t){this.modal=!0;var e=this.tableData1[t];this.formCustom.username=e.username,this.formCustom.identity=e.identity.identity_id,this.formCustom.password=e.password,this.formCustom.mailbox=e.mailbox,this.title="用户信息编辑",this.tomethod="update"},remove:function(t){var e=this;Object(s["b"])(this.tableData1[t].username).then(function(t){200===t.data.resultCode?(e.$Message.info(t.data.message),e.changePage(e.currentPage)):400===t.data.resultCode?e.$Message.info(t.data.message):e.$Message.info("删除用户失败")})},ok:function(){var t=this;this.$refs["formCustom"].validate(function(e){e&&("update"===t.tomethod?Object(s["f"])(t.formCustom).then(function(e){t.$Message.info(e.data.message)}):"add"===t.tomethod&&Object(s["a"])(t.formCustom).then(function(e){t.$Message.info(e.data.message)}),t.modal=!1)})},cancel:function(){this.modal=!1},addUser:function(){this.modal=!0,this.formCustom.username="",this.formCustom.identity=1,this.formCustom.password="",this.formCustom.mailbox="",this.title="新增用户",this.tomethod="add"},mysearch:function(){var t=this;Object(s["e"])(this.searchValue).then(function(e){200===e.data.resultCode?(t.tableData1=[],t.tableData1.push(e.data.user)):400===e.data.resultCode?t.$Message.info(e.data.message):t.$Message.info("该用户名不存在")})}},created:function(){var t=this;Object(s["d"])(10,1).then(function(e){var a=e.data.page;"200"===e.data.resultCode?(a.list.forEach(function(e){t.tableData1.push(e)}),t.total=a.total,t.currentPage=a.pageNum):400===e.data.resultCode&&t.$Message.info(e.data.message)})}},i=n,l=(a("4fb4"),a("2877")),u=Object(l["a"])(i,o,r,!1,null,null,null);u.options.__file="myUserMananger.vue";e["default"]=u.exports},"4fb4":function(t,e,a){"use strict";var o=a("9932"),r=a.n(o);r.a},9932:function(t,e,a){}}]);