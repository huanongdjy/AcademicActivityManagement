(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c1039d88","chunk-29c741c5"],{2649:function(t,e,a){},3112:function(t,e,a){"use strict";var o=a("2649"),i=a.n(o);i.a},"5a22":function(t,e,a){"use strict";var o=a("cd81"),i=a.n(o);i.a},"75e9":function(t,e,a){"use strict";a.d(e,"d",function(){return i}),a.d(e,"c",function(){return r}),a.d(e,"a",function(){return n}),a.d(e,"b",function(){return s}),a.d(e,"f",function(){return l}),a.d(e,"e",function(){return d});var o=a("75c5");function i(t,e){var a={pageSize:t,currentPage:e};return Object(o["a"])({url:"/getTypesWithPage",method:"post",data:a,withCredentials:!0})}function r(t){return Object(o["a"])({url:"/getAllType",method:"post",data:t,withCredentials:!0})}function n(t){return Object(o["a"])({url:"/addType",method:"post",data:t,withCredentials:!0})}function s(t){return Object(o["a"])({url:"/deleteType",method:"post",data:t,withCredentials:!0})}function l(t){return Object(o["a"])({url:"/updateType",method:"post",data:t,withCredentials:!0})}function d(t){return Object(o["a"])({url:"/searchType",method:"post",data:t,withCredentials:!0})}},"7fe6":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",{staticClass:"expand-row"},[a("Col",{attrs:{span:"24"}},[a("span",{staticClass:"expand-key"},[t._v("内容: ")]),a("span",{staticClass:"expand-value",domProps:{innerHTML:t._s(t.row.content)}},[t._v(t._s(t.row.content))])])],1),a("Modal",{attrs:{title:"View Image"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[t.visible?a("img",{staticStyle:{width:"100%"},attrs:{src:t.httpurl+"uploaded/"+t.viewUrl}}):t._e()])],1)},i=[],r=a("c38e"),n={props:{row:Object},data:function(){return{httpurl:r["a"],imageList:[{name:"a42bdcc1178e62b4694c830f028db5c0",url:"D:/微信图片_20190220163347.png"},{name:"bc7521e033abdd1e92222d733590f104",url:"https://o5wwk8baw.qnssl.com/bc7521e033abdd1e92222d733590f104/avatar"}],imgName:"",visible:!1,viewUrl:""}},methods:{handleView:function(t){this.viewUrl=t,this.visible=!0},handleRemove:function(t){var e=this.$refs.upload.fileList;this.$refs.upload.fileList.splice(e.indexOf(t),1)}}},s=n,l=(a("91f7"),a("3112"),a("2877")),d=Object(l["a"])(s,o,i,!1,null,"237d0566",null);d.options.__file="table-expand.vue";e["default"]=d.exports},"91f7":function(t,e,a){"use strict";var o=a("d4dd"),i=a.n(o);i.a},cb47:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Button",{staticClass:"mybutton",attrs:{type:"primary"},on:{click:t.add}},[t._v("新增成果")]),a("Input",{staticClass:"search",attrs:{search:"",placeholder:"请输入成果名称"},on:{"on-search":t.mysearch},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}},[a("Icon",{attrs:{slot:"suffix",type:"ios-search"},slot:"suffix"})],1),a("Table",{attrs:{columns:t.columns,data:t.data1}}),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:t.total,current:t.currentPage},on:{"on-change":t.changePage}})],1)]),a("Modal",{attrs:{title:"成果信息编辑",width:"1000px"},model:{value:t.visibleUpdate,callback:function(e){t.visibleUpdate=e},expression:"visibleUpdate"}},[a("Form",{ref:"formItem",attrs:{model:t.formItem,"label-width":80,rules:t.ruleValid}},[a("FormItem",{attrs:{label:"成果名称",prop:"title"}},[a("Input",{attrs:{placeholder:"请输入..."},model:{value:t.formItem.title,callback:function(e){t.$set(t.formItem,"title",e)},expression:"formItem.title"}})],1),a("FormItem",{attrs:{label:"成员",prop:"member"}},[a("Input",{attrs:{placeholder:"请输入..."},model:{value:t.formItem.member,callback:function(e){t.$set(t.formItem,"member",e)},expression:"formItem.member"}})],1),a("FormItem",{attrs:{label:"显示权重"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.formItem.ordering,expression:"formItem.ordering"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.formItem,"ordering",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"1"}},[t._v("1")]),a("option",{attrs:{value:"2"}},[t._v("2")]),a("option",{attrs:{value:"3"}},[t._v("3")]),a("option",{attrs:{value:"4"}},[t._v("4")]),a("option",{attrs:{value:"5"}},[t._v("5")]),a("option",{attrs:{value:"6"}},[t._v("6")]),a("option",{attrs:{value:"7"}},[t._v("7")]),a("option",{attrs:{value:"8"}},[t._v("8")]),a("option",{attrs:{value:"9"}},[t._v("9")]),a("option",{attrs:{value:"10"}},[t._v("10")])])]),a("FormItem",{attrs:{label:"获取时间"}},[a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{prop:"date"}},[a("DatePicker",{attrs:{type:"date",placeholder:"选中日期"},model:{value:t.formItem.date,callback:function(e){t.$set(t.formItem,"date",e)},expression:"formItem.date"}})],1)],1),a("Col",{staticClass:"mycolum",staticStyle:{"text-align":"center"},attrs:{span:"1"}},[t._v("-")]),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{prop:"time"}},[a("TimePicker",{attrs:{type:"time",placeholder:"选择时间"},model:{value:t.formItem.time,callback:function(e){t.$set(t.formItem,"time",e)},expression:"formItem.time"}})],1)],1)],1)],1),a("FormItem",{attrs:{label:"类型",prop:"type_id"}},[a("Select",{model:{value:t.formItem.type_id,callback:function(e){t.$set(t.formItem,"type_id",e)},expression:"formItem.type_id"}},t._l(t.typeList,function(e){return a("Option",{key:e.type_id,attrs:{value:e.type_id}},[t._v(t._s(e.type_name))])}))],1),a("FormItem",{attrs:{label:"是否显示"}},[a("i-switch",{attrs:{size:"large"},model:{value:t.formItem.toshow,callback:function(e){t.$set(t.formItem,"toshow",e)},expression:"formItem.toshow"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("On")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("Off")])])],1),t.uploadList.length>0?a("FormItem",{attrs:{label:"已上传图片"}},t._l(t.uploadList,function(e){return a("div",{key:e.url,staticClass:"demo-upload-list"},[a("img",{attrs:{src:t.httpurl+"uploaded/"+e.url}}),a("div",{staticClass:"demo-upload-list-cover"},[a("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(a){t.handleView(e.url)}}}),a("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(a){t.handleRemove(e)}}})],1)])})):t._e(),a("FormItem",[a("quillEditor",{ref:"myQuillEditor",attrs:{options:t.editorOption},model:{value:t.formItem.content,callback:function(e){t.$set(t.formItem,"content",e)},expression:"formItem.content"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text",size:"large"},on:{click:t.cancel}},[t._v("取消")]),a("Button",{attrs:{type:"primary",size:"large"},on:{click:t.ok}},[t._v("确定")])],1)],1),a("Modal",{attrs:{title:"新增成果",width:"1000px"},model:{value:t.visibleAdd,callback:function(e){t.visibleAdd=e},expression:"visibleAdd"}},[a("Form",{ref:"formAdd",attrs:{model:t.formAdd,"label-width":80,rules:t.ruleValid}},[a("FormItem",{attrs:{label:"成果名称",prop:"title"}},[a("Input",{attrs:{placeholder:"请输入..."},model:{value:t.formAdd.title,callback:function(e){t.$set(t.formAdd,"title",e)},expression:"formAdd.title"}})],1),a("FormItem",{attrs:{label:"成员",prop:"member"}},[a("Input",{attrs:{placeholder:"请输入..."},model:{value:t.formAdd.member,callback:function(e){t.$set(t.formAdd,"member",e)},expression:"formAdd.member"}})],1),a("FormItem",{attrs:{label:"显示权重",prop:"ordering"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.formAdd.ordering,expression:"formAdd.ordering"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.formAdd,"ordering",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"1"}},[t._v("1")]),a("option",{attrs:{value:"2"}},[t._v("2")]),a("option",{attrs:{value:"3"}},[t._v("3")]),a("option",{attrs:{value:"4"}},[t._v("4")]),a("option",{attrs:{value:"5"}},[t._v("5")]),a("option",{attrs:{value:"6"}},[t._v("6")]),a("option",{attrs:{value:"7"}},[t._v("7")]),a("option",{attrs:{value:"8"}},[t._v("8")]),a("option",{attrs:{value:"9"}},[t._v("9")]),a("option",{attrs:{value:"10"}},[t._v("10")])])]),a("FormItem",{attrs:{label:"获取时间",prop:"date time"}},[a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{prop:"date"}},[a("DatePicker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.formAdd.date,callback:function(e){t.$set(t.formAdd,"date",e)},expression:"formAdd.date"}})],1)],1),a("Col",{staticClass:"mycolum",staticStyle:{"text-align":"center"},attrs:{span:"1"}},[t._v("-")]),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{prop:"time"}},[a("TimePicker",{attrs:{type:"time",placeholder:"选择时间"},model:{value:t.formAdd.time,callback:function(e){t.$set(t.formAdd,"time",e)},expression:"formAdd.time"}})],1)],1)],1)],1),a("FormItem",{attrs:{label:"类型",prop:"type_id"}},[a("Select",{model:{value:t.formAdd.type_id,callback:function(e){t.$set(t.formAdd,"type_id",e)},expression:"formAdd.type_id"}},t._l(t.typeList,function(e){return a("Option",{key:e.type_id,attrs:{value:e.type_id}},[t._v(t._s(e.type_name))])}))],1),a("FormItem",{attrs:{label:"是否显示"}},[a("i-switch",{attrs:{size:"large"},model:{value:t.formAdd.toshow,callback:function(e){t.$set(t.formAdd,"toshow",e)},expression:"formAdd.toshow"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("On")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("Off")])])],1),t.uploadList.length>0?a("FormItem",{attrs:{label:"已上传图片"}},t._l(t.uploadList,function(e){return a("div",{key:e.url,staticClass:"demo-upload-list"},[a("img",{attrs:{src:t.httpurl+"uploaded/"+e.url}}),a("div",{staticClass:"demo-upload-list-cover"},[a("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(a){t.handleView(e.url)}}}),a("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(a){t.handleRemove(e)}}})],1)])})):t._e(),a("FormItem",[a("quillEditor",{ref:"myQuillEditor",attrs:{options:t.editorOption},model:{value:t.formAdd.content,callback:function(e){t.$set(t.formAdd,"content",e)},expression:"formAdd.content"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text",size:"large"},on:{click:t.cancel}},[t._v("取消")]),a("Button",{attrs:{type:"primary",size:"large"},on:{click:t.ok}},[t._v("确定")])],1)],1),a("Modal",{attrs:{title:"View Image"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[t.visible?a("img",{staticStyle:{width:"100%"},attrs:{src:t.httpurl+"uploaded/"+t.viewUrl}}):t._e()])],1)},i=[],r=(a("7f7f"),a("ac6a"),a("a753"),a("8096"),a("14e1"),a("953d")),n=a("5dde"),s=a("7fe6"),l=a("c38e"),d=a("c276"),u=a("75c5");function c(t,e,a){var o={pageSize:t,currentPage:e,type:a};return Object(u["a"])({url:"/getInformationWithPage",method:"post",data:o,withCredentials:!0})}function m(t){return Object(u["a"])({url:"/updateAchievement",method:"post",data:t,withCredentials:!0})}function p(t){var e={uploadList:t};return Object(u["a"])({url:"/deletePhotos",method:"post",data:e,withCredentials:!0})}function f(t){return Object(u["a"])({url:"/addAchievement",method:"post",data:t,withCredentials:!0})}function h(t){return Object(u["a"])({url:"/deleteAchievement",method:"post",data:t,withCredentials:!0})}function v(t){return Object(u["a"])({url:"/searchaChievement",method:"post",data:t,withCredentials:!0})}function g(t,e){var a={id:t,toshow:e};return Object(u["a"])({url:"/changeAchievementToshow",method:"post",data:a,withCredentials:!0})}var b=a("75e9");r["Quill"].register("modules/ImageExtend",n["a"]);var w={components:{expandRow:s["default"],quillEditor:r["quillEditor"]},data:function(){var t=this,e=function(t,e,a){""===e?a(new Error("请输入名称")):a()},a=function(t,e,a){""===e?a(new Error("请输入成员")):a()},o=function(t,e,a){""===e?a(new Error("请输入内容")):a()},i=function(t,e,a){""===e?a(new Error("请选择时间")):a()},r=function(t,e,a){""===e?a(new Error("请输入日期")):a()},u=function(t,e,a){""===e?a(new Error("请选中类型")):a()};return{httpurl:l["a"],typeList:[],searchValue:"",currentPage:1,total:0,visibleUpdate:!1,visibleAdd:!1,visible:!1,uploadList:[],viewUrl:"",tomethod:"",formAdd:{id:"",title:"",member:"",content:"",photoList:[],time:"",date:"",ordering:"10",toshow:!0,type_id:""},formItem:{id:"",title:"",member:"",content:"",photoList:[],time:"",date:"",ordering:"10",toshow:!0,type_id:""},columns:[{type:"expand",width:50,render:function(t,e){return t(s["default"],{props:{row:e.row}})}},{title:"成果名称",key:"title"},{title:"成员",key:"member"},{title:"获取时间",key:"acquisitiondate",render:function(t,e){return t("div",e.row.acquisitiondate.slice(0,10))}},{title:"是否对外展示",key:"action",width:150,align:"center",render:function(e,a){return e("i-switch",{props:{value:a.row.toshow},on:{input:function(t){a.row.toshow=!!t},"on-change":function(){t._changeToshow(a.row.id,a.row.toshow)}}})}},{title:"操作",key:"action",width:150,align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.show(a.index)}}},"编辑"),e("Button",{props:{type:"error",size:"small"},on:{click:function(){t.remove(a.index)}}},"删除")])}}],data1:[],ruleValid:{title:[{validator:e,trigger:"blur"}],member:[{validator:a,trigger:"blur"}],content:[{validator:o,trigger:"blur"}],time:[{validator:i,trigger:"blur"}],date:[{validator:r,trigger:"blur"}],type_id:[{validator:u,trigger:"blur"}]},header:{Authorization:Object(d["j"])()},token:Object(d["j"])(),editorOption:{modules:{ImageExtend:{loading:!0,name:"file",size:2,action:l["a"]+"uploadPhoto",response:function(e){return t.uploadList.push({url:e.url}),l["a"]+"uploaded/"+e.url},headers:function(e){e.withCredentials=!0,e.setRequestHeader("Authorization",t.token)}},toolbar:{container:n["c"],handlers:{image:function(){n["b"].emit(this.quill.id)}}}}}}},methods:{_changeToshow:function(t,e){var a=this;g(t,e).then(function(t){a.$Message.warning(t.data.message)})},changePage:function(t){var e=this;c(10,t,"achievements").then(function(t){var a=t.data.page;e.data1=[],"200"===t.data.resultCode?(a.list.forEach(function(t){e.data1.push(t)}),e.total=a.total,e.currentPage=a.pageNum):400===t.data.resultCode&&e.$Message.info(t.data.message)})},mysearch:function(){var t=this;v(this.searchValue).then(function(e){200===e.data.resultCode&&0!==e.data.achievements.length?(t.data1=[],e.data.achievements.forEach(function(e){t.data1.push(e)})):400===e.data.resultCode?t.$Message.info(e.data.message):t.$Message.info("该成果名不存在")})},show:function(t){var e=this;this.visibleUpdate=!0,this.tomethod="update",this.formItem.id=this.data1[t].id,this.formItem.title=this.data1[t].title,this.formItem.member=this.data1[t].member,this.formItem.toshow=this.data1[t].toshow,this.formItem.content=this.data1[t].content,this.formItem.date=this.data1[t].acquisitiondate.substring(0,10),this.formItem.time=this.data1[t].acquisitiondate.substring(11,19),this.formItem.ordering=this.data1[t].ordering,this.formItem.type_id=this.data1[t].type_id,this.formItem.photoList=[],this.data1[t].photoList.forEach(function(t){e.formItem.photoList.push(t)})},remove:function(t){var e=this;h(this.data1[t].id).then(function(t){200===t.data.resultCode?(e.$Message.info(t.data.message),e.changePage(e.currentPage)):400===t.data.resultCode?e.$Message.info(t.data.message):e.$Message.info("删除成果失败")})},ok:function(){var t=this;"add"===this.tomethod?this.$refs["formAdd"].validate(function(e){if(!e)return!1;t.uploadList.forEach(function(e){t.formAdd.photoList.push(e)}),f(t.formAdd).then(function(e){200===e.data.resultCode?(t.data1=[],c(10,t.currentPage,"achievements").then(function(e){var a=e.data.page;"200"===e.data.resultCode&&(a.list.forEach(function(e){t.data1.push(e)}),t.total=a.total,t.currentPage=a.pageNum)}),t.$Message.info(e.data.message)):400===e.data.resultCode&&t.$Message.info(e.data.message)}),t.visibleAdd=!1,t.uploadList=[]}):"update"===this.tomethod&&this.$refs["formItem"].validate(function(e){if(!e)return!1;t.uploadList.forEach(function(e){t.formItem.photoList.push(e)}),m(t.formItem).then(function(e){200===e.data.resultCode?(t.data1=[],c(10,t.currentPage,"achievements").then(function(a){var o=a.data.page;"200"===a.data.resultCode?(o.list.forEach(function(e){t.data1.push(e)}),t.total=o.total,t.currentPage=o.pageNum):400===e.data.resultCode&&t.$Message.info(e.data.message)}),t.$Message.info(e.data.message)):400===e.data.resultCode&&t.$Message.info(e.data.message)}),t.visibleUpdate=!1,t.uploadList=[]})},cancel:function(){var t=this;p(this.uploadList).then(function(e){e.data.warn&&t.$Message.warning(e.data.message)}),this.visibleAdd=!1,this.visibleUpdate=!1,this.uploadList=[]},add:function(){this.visibleAdd=!0,this.tomethod="add",this.formAdd.id="",this.formAdd.title="",this.formAdd.member="",this.formAdd.content="",this.formAdd.date="",this.formAdd.time="",this.formAdd.type_id="",this.formAdd.photoList=[]},handleView:function(t){this.viewUrl=t,this.visible=!0},handleRemove:function(t){var e=this.$refs.upload.fileList;this.$refs.upload.fileList.splice(e.indexOf(t),1)},handleSuccess:function(t,e){this.uploadList.push({url:t.url})},handleFormatError:function(t,e){this.$Notice.warning({title:"格式错误",desc:"文件格式： "+e.name+" 不是正确的格式，请选中jpg、jpeg、png等格式图片。"})},handleMaxSize:function(t){this.$Notice.warning({title:"图片过大",desc:"文件最大为2m."})},handleBeforeUpload:function(){var t=this.uploadList.length<10;return t||this.$Notice.warning({title:"最多上传10张图片."}),t}},created:function(){var t=this;c(10,this.currentPage,"achievements").then(function(e){var a=e.data.page;"200"===e.data.resultCode?(a.list.forEach(function(e){t.data1.push(e)}),t.total=a.total,t.currentPage=a.pageNum):400===e.data.resultCode&&t.$Message.info(e.data.message)}),Object(b["c"])().then(function(e){200===e.data.resultCode?e.data.typeList.forEach(function(e){t.typeList.push(e)}):400===e.data.resultCode&&t.$Message.info(e.data.message)})}},y=w,_=(a("5a22"),a("2877")),I=Object(_["a"])(y,o,i,!1,null,null,null);I.options.__file="myAchievementManager.vue";e["default"]=I.exports},cd81:function(t,e,a){},d4dd:function(t,e,a){}}]);